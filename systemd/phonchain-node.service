[Unit]
Description=Phonchain Node (PoP-S4.1) - Gateway/Core
After=network.target

[Service]
Type=simple
User=phonchain
Group=phonchain
WorkingDirectory=/opt/phonchain-node

EnvironmentFile=/opt/phonchain-node/.env

# Bind ONLY localhost. Never expose port 5000 publicly.
ExecStart=/opt/phonchain-node/.venv/bin/gunicorn -w 2 -b 127.0.0.1:5000 app:app

Restart=always
RestartSec=2

# Hardening (safe defaults)
NoNewPrivileges=true
PrivateTmp=true

[Install]
WantedBy=multi-user.target
